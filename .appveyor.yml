image: ubuntu

shallow_clone: true

environment:
  myvar1: Hello, world!
  ANOTHER_VAR: Test!!!

install:
- sh: appveyor UpdateBuild --version "1.2.${APPVEYOR_BUILD_NUMBER}" --message "Hi there, Bash!"
- sh: ls /tmp -al
- sh: ls
- ps: |
    Write-Host "Setting 'aaa' variable in one script"
    $env:aaa = 'Hello, World!'

- sh: whoami
- sh: lsb_release -a
- sh: printenv
- sh: touch /tmp/tmp-1
- ls /tmp/ -al
#- sh: powershell ./test.ps1
- appveyor PushArtifact test.txt
- echo "Should be run on both Windows and Mac"
#- sh: ENV

- ps: |
    Write-Host "Displaying 'aaa' variable in another script: $env:aaa"

- batch: should be skipped by both platforms
- ps: 'gci env:'
- ls
- sh: ls $HOME
- sh: echo "This is Bash script!"
- npm --version
- ps: 'Write-Host "This is run on Windows only: $env:USERPROFILE"'
- cmd: 'echo This run on Windows too: %USERPROFILE%'
#- sh: appveyor PackageArtifacts
#- sh: appveyor PushArtifact readme.md --fileName readme.md
#- sh: appveyor PushArtifact --path '**/*.md'
- stat /tmp
- rm /tmp/tmp-*
- ls /tmp/ -al

build: off

test: off
